exports.id=342,exports.ids=[342],exports.modules={1505:(e,t,r)=>{Promise.resolve().then(r.bind(r,3658)),Promise.resolve().then(r.bind(r,2263)),Promise.resolve().then(r.bind(r,3018)),Promise.resolve().then(r.bind(r,6121)),Promise.resolve().then(r.bind(r,2507))},5296:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3907,23)),Promise.resolve().then(r.t.bind(r,7648,23)),Promise.resolve().then(r.t.bind(r,1944,23)),Promise.resolve().then(r.t.bind(r,9297,23)),Promise.resolve().then(r.t.bind(r,2649,23)),Promise.resolve().then(r.t.bind(r,4423,23))},3658:(e,t,r)=>{"use strict";r.d(t,{Html:()=>l});var o=r(5452),a=r(9780),n=r(8677),i=r(2339),s=r(3018);let l=(0,i.forwardRef)(({children:e,contexts:t=[],...r},i)=>{let l=(0,a.j)(...t),c=(0,s.useNomadStore)(e=>e.htmlDivRef);return c?.current!==null?o.jsx(n.V,{portal:c,...r,ref:i,children:o.jsx(l,{children:e})}):null});l.displayName="Html"},2263:(e,t,r)=>{"use strict";r.d(t,{NomadMap:()=>m});var o=r(5452),a=r(9780),n=r(5105),i=r(6597),s=r(2339),l=r(544);r(7992),r(6559);var c=r(3018);function d(e){let t=(0,s.useRef)(null);return(0,s.useRef)(),(0,s.useRef)(),(0,c.useNomadStore)(e=>e.setMapboxMap),o.jsx("div",{ref:t,style:{width:"100%",height:"100%"}})}r(8909);let u=e=>{let t=(0,s.useRef)(e);return t.current=e,(0,s.useCallback)((...e)=>t.current(...e),[])};function m({children:e,accessToken:t,host:r,initialViewState:n,className:i,contexts:l=[],mapboxProps:u,...m}){let h=(0,s.useRef)(null);(0,c.useNomadStore)(e=>e.htmlDivRef),(0,c.useNomadStore)(e=>e.setHtmlDivRef);let f=(0,c.useNomadStore)(e=>e.mapboxMap),x=(0,c.useNomadStore)(e=>e.mapboxLoaded),b=(0,c.useNomadStore)(e=>e.mapStyle),S=(0,c.useNomadStore)(e=>e.worldGroup),w=(0,c.useNomadStore)(e=>e._setMapboxLoaded);(0,c.useNomadStore)(e=>e._cleanup);let v=(0,a.j)(c.po,...l);return o.jsx("div",{ref:h,className:i,children:(0,o.jsxs)("div",{style:{height:"100%",width:"100%",position:"relative"},children:[o.jsx(d,{accessToken:t,host:r,style:b,initialViewState:n,antialias:!0,onLoad:e=>{w(!0)},dragPan:{easing:e=>0},...u}),f&&x&&o.jsx(p,{map:f,...m,children:o.jsx(v,{children:o.jsx("primitive",{object:S,children:e})})})]})})}function p({map:e,...t}){return(0,c.useNomadStore)(e=>e.worldGroup),function({children:e,...t},r,o){(0,c.useNomadStore)(e=>e._setCameraSync),(0,c.useNomadStore)(e=>e._setR3Fstate);let a=(0,s.useRef)(null),{root:l,store:d}=(0,s.useMemo)(()=>{let e=r.getCanvas(),o=e.getContext("webgl2");a.current&&n.w.get(e)||(a.current=(0,n.b)(e));let s=a.current;return s.configure({dpr:window.devicePixelRatio,events:i.U3,...t,frameloop:"never",gl:{context:o,autoClear:!1,antialias:!0,...t?.gl},onCreated:e=>{e.gl.forceContextLoss=()=>{},t.onCreated?.(e)},camera:{matrixAutoUpdate:!1,near:1,far:1e4},size:{width:e.clientWidth,height:e.clientHeight,top:e.offsetTop,left:e.offsetLeft,updateStyle:!1,...t?.size}}),{root:s,store:n.w.get(e).store}},[r,t]);u(()=>{let e=r.getCanvas(),t=n.w.get(e)?.store;if(!t)return;let{setDpr:o,setSize:a}=t.getState();o(window.devicePixelRatio),a(e.clientWidth,e.clientHeight,!1,e.offsetTop,e.offsetLeft)})}(t,e,0),null}(0,n.e)(l)},7992:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});let o=Math.atan(3/4),a={WORLD_SIZE:1024e3,EARTH_CIRCUMFERENCE:2*Math.PI*6371008.8,FOV_ORTHO:.1/180*Math.PI,FOV:o,FOV_DEGREES:180*o/Math.PI,TILE_SIZE:512}},3018:(e,t,r)=>{"use strict";r.d(t,{NomadStoreProvider:()=>m,po:()=>d,useNomadStore:()=>u});var o=r(5452),a=r(2339),n=r(544),i=r(257),s=r(8953);let l={perspective:{fov:50,pitch:45,canRotate:!0},orthographic:{fov:2.2,pitch:0,canRotate:!1}},c=e=>(0,i.Ue)()((0,s.XR)((t,r)=>{function o(){let t=new n.Group;return t.name="World Group",t.matrixAutoUpdate=!1,{mapboxMap:null,threeStateRef:null,mapboxLoaded:!1,worldGroup:t,cameraSync:null,projectionMode:"perspective",mapStyle:e.mapStyle??"mapbox://styles/mapbox/light-v10",htmlDivRef:e.htmlDivRef??null}}return{...o(),setMapboxMap:e=>t({mapboxMap:e}),setMapStyle:e=>t({mapStyle:e}),setHtmlDivRef:e=>t({htmlDivRef:e}),_setR3Fstate:e=>{t({threeStateRef:e});let o=r()._postSetupTask;o?.()},_setMapboxLoaded:e=>{t({mapboxLoaded:e});let o=r()._postSetupTask;o?.()},_setWorldGroup:e=>t({worldGroup:e}),setProjectionMode:e=>{let o=r().mapboxMap;if(!o){console.warn("Map not loaded, cannot change projection mode");return}let a=r().threeStateRef?.getState();if(!a){console.warn("Three state not loaded, cannot change projection mode");return}o.transform.fov=l[e].fov,a.camera.fov=l[e].fov,l[e].canRotate?(o.setMaxPitch(85),o.touchPitch.enable()):(o.setMaxPitch(0),o.touchPitch.disable()),o.setPitch(l[e].pitch),o.repaint=!0,o.transform._updateCameraOnTerrain(),t({projectionMode:e})},_setCameraSync:e=>t({cameraSync:e}),_postSetupTask:()=>{let o=r().mapboxMap,a=r().threeStateRef;o&&a&&(e.projectionMode&&r().setProjectionMode(e.projectionMode),t({_postSetupTask:null}))},_cleanup:()=>{t(o())},enableMapboxCameraMovement:e=>{let t=r().mapboxMap;if(!t){console.warn("Map not loaded, cannot enable/disable camera movement");return}let o=r().projectionMode;e?(t.dragPan.enable(),t.dragRotate.enable(),t.touchZoomRotate.enable(),l[o].canRotate?(t.setMaxPitch(85),t.touchPitch.enable()):(t.setMaxPitch(0),t.touchPitch.disable())):(t.dragPan.disable(),t.dragRotate.disable(),t.touchZoomRotate.disable(),t.touchPitch.disable())}}})),d=(0,a.createContext)(null);function u(e){let t=function(){let e=(0,a.useContext)(d);if(!e)throw Error("useNomadStoreInstance must be used within a NomadStoreProvider");return e}();return(0,i.oR)(t,e)}function m({children:e,initialStoreProps:t}){let r=(0,a.useRef)();if(!r.current){let e=c(t);r.current=e}return o.jsx(d.Provider,{value:r.current,children:e})}},6121:(e,t,r)=>{"use strict";r.d(t,{ThreeClickInterceptor:()=>l,threeClickInterceptorPlaneObject3DName:()=>s});var o=r(5452),a=r(5105),n=r(2339),i=r(544);let s="ThreeClickInterceptorPlane";function l({...e}){(0,a.z)(e=>e.camera),(0,a.z)(e=>e.scene);let t=(0,n.useMemo)(()=>{let e=new i.PlaneGeometry(1e3,1e3),t=new i.MeshBasicMaterial({transparent:!0,opacity:0,side:i.DoubleSide});return new i.Mesh(e,t)},[]);return o.jsx("primitive",{object:t,name:s,...e})}},2507:(e,t,r)=>{"use strict";r.d(t,{ZoomInvariantGroup:()=>l});var o=r(5452),a=r(5105),n=r(2339),i=r(544),s=r(3018);function l({children:e,...t}){let r=(0,n.useRef)(null),l=(0,s.useNomadStore)(e=>e.worldGroup),[c]=(0,n.useState)(()=>new i.Vector3);return(0,a.A)(()=>{let e=r.current;if(!e)return;let t=l.matrix,o=t.elements,a=c.set(o[0],o[1],o[2]).length();0>t.determinant()&&(a=-a);let n=1/a;e.scale.setScalar(n)}),o.jsx("group",{ref:r,...t,children:e})}},7013:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var o=r(1949),a=r(6631);function n({children:e}){return(0,o.jsxs)("html",{lang:"en",className:"h-full",children:[(0,o.jsxs)("head",{children:[o.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),o.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),o.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"})]}),o.jsx(a.dd,{initialStoreProps:{mapStyle:"mapbox://styles/filmfan222/cm0cl3c6d012l01o06ger4788",projectionMode:"orthographic"},children:o.jsx("body",{className:"h-full m-0 p-0 overflow-hidden",children:o.jsx("main",{className:"fixed bg-[#ffffff] text-black size-full",children:e})})})]})}r(98)},6631:(e,t,r)=>{"use strict";r.d(t,{R7:()=>p,dd:()=>b});var o=r(1949),a=r(2785),n=r(2418),i=r(5144);let s={WORLD_SIZE:1024e3,EARTH_CIRCUMFERENCE:2*Math.PI*6371008.8};function l(e){return Math.abs(s.WORLD_SIZE/Math.cos((0,i.Id)((0,i.uZ)(e,-85.051129,85.051129)))/s.EARTH_CIRCUMFERENCE)}(0,n.forwardRef)(({children:e,longitude:t,latitude:r,altitude:i,latitudeScale:c=!0,...d},u)=>{let{pos:m,scale:p}=(0,n.useMemo)(()=>{let e=function(e){let t=a.MercatorCoordinate.fromLngLat([e[0],e[1]],e[2]),r=t.x*s.WORLD_SIZE,o=t.y*s.WORLD_SIZE;o=s.WORLD_SIZE-o;let n=e[2]??0;return[-(r-=s.WORLD_SIZE/2),-(o-=s.WORLD_SIZE/2),n*=l(e[1])]}([t,r,i]),o=l(r);return{pos:e,scale:[o,o,o]}},[r,t,i]);return o.jsx("group",{ref:u,position:m,scale:c?p:void 0,rotation:[0,0,Math.PI],...d,children:e})}).displayName="Coordinates";var c=r(7873);let d=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/map.tsx`),{__esModule:u,$$typeof:m}=d;d.default;let p=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/map.tsx#NomadMap`),h=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx`),{__esModule:f,$$typeof:x}=h;h.default,(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx#createNomadStore`),(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx#NomadContext`),(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx#useNomadStoreInstance`),(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx#useNomadStore`);let b=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/store.tsx#NomadStoreProvider`),S=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/zoom-invariant-group.tsx`),{__esModule:w,$$typeof:v}=S;S.default,(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/zoom-invariant-group.tsx#ZoomInvariantGroup`);let y=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/Html.tsx`),{__esModule:P,$$typeof:R}=y;y.default,(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/Html.tsx#Html`),(()=>{let e=new a.Point(0,0);return({pointer:t,mapboxMap:r})=>{e.x=t.x,e.y=t.y;let o=r.transform.pointCoordinate3D(e);return[o.toLngLat(),o.toAltitude()??null]}})();let g=(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/utils/three-click-interceptor.tsx`),{__esModule:M,$$typeof:j}=g;g.default,(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/utils/three-click-interceptor.tsx#threeClickInterceptorPlaneObject3DName`),(0,c.createProxy)(String.raw`/home/skydio/aircam/cloud/web/nomad/src/utils/three-click-interceptor.tsx#ThreeClickInterceptor`)},98:()=>{}};