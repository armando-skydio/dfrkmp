(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8480:function(e,t,n){Promise.resolve().then(n.bind(n,63)),Promise.resolve().then(n.bind(n,7028)),Promise.resolve().then(n.bind(n,3034)),Promise.resolve().then(n.bind(n,7232)),Promise.resolve().then(n.bind(n,5290)),Promise.resolve().then(n.bind(n,9277))},63:function(e,t,n){"use strict";n.d(t,{default:function(){return m}});var r=n(4004),l=n(4978),i=n(6447),o=n(6306),a=n(4921),u=n(566),s=n(5937),d=n(4158),c=n(9391);let h=(0,l.forwardRef)((e,t)=>{var{children:n,longitude:i,latitude:d,altitude:h,latitudeScale:v=!0}=e,E=(0,u._)(e,["children","longitude","latitude","altitude","latitudeScale"]);let{pos:_,scale:m}=(0,l.useMemo)(()=>{let e=function(e){var t;let n=s.MercatorCoordinate.fromLngLat([e[0],e[1]],e[2]),r=n.x*c.j.WORLD_SIZE,l=n.y*c.j.WORLD_SIZE;l=c.j.WORLD_SIZE-l,r-=c.j.WORLD_SIZE/2,l-=c.j.WORLD_SIZE/2;let i=null!==(t=e[2])&&void 0!==t?t:0;return[-r,-l,i*=f(e[1])]}([i,d,h]),t=f(d);return{pos:e,scale:[t,t,t]}},[d,i,h]);return(0,r.jsx)("group",(0,a._)((0,o._)({ref:t,position:_,scale:v?m:void 0,rotation:[0,0,Math.PI]},E),{children:n}))});function f(e){return Math.abs(c.j.WORLD_SIZE/Math.cos((0,d.Id)((0,d.uZ)(e,-85.051129,85.051129)))/c.j.EARTH_CIRCUMFERENCE)}h.displayName="Coordinates",n(3034),n(7232),n(9277),n(7028),(()=>{let e=new s.Point(0,0);return t=>{var n;let{pointer:r,mapboxMap:l}=t;e.x=r.x,e.y=r.y;let i=l.transform.pointCoordinate3D(e);return[i.toLngLat(),null!==(n=i.toAltitude())&&void 0!==n?n:null]}})(),n(5290),n(948),n(6279),new i.Euler,new i.Matrix4;let v=l.createContext(null),E=()=>l.useContext(v),_=e=>{let t=E(),[n,r]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(null==e||null==t)return;let[n,l]=e;t.getElevation(n,l).then(e=>{r(e)}).catch(t=>{console.error("useTerrainElevationAtLocation.terrain_elevation_error",{error:t,location:e})})},[e,t]),n};var m=e=>{let{location:t,scale:n=1}=e,o=(0,l.useMemo)(()=>{let e=document.createElement("canvas");e.width=64,e.height=64;let t=e.getContext("2d");t&&(t.beginPath(),t.arc(32,32,28,0,2*Math.PI),t.fillStyle="#0066ff",t.fill(),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=4,t.stroke());let n=new i.CanvasTexture(e);return new i.SpriteMaterial({map:n,transparent:!0,depthTest:!1})},[]),a=_([t.longitude,t.latitude]);return console.log("DEBUG: terrainElevation",a),(0,r.jsx)(h,{latitude:t.latitude,longitude:t.longitude,children:(0,r.jsx)("sprite",{material:o,position:[0,0,null!=a?a:0],scale:[n,n,n]})})}}},function(e){e.O(0,[161,403,225,345,109,380,96,470,594,744],function(){return e(e.s=8480)}),_N_E=e.O()}]);